<html>

<head>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
    <script>
    // ΕΔΩ ΤΟΠΟΘΕΤΩ ΤΑ ΣΥΣΤΑΤΙΚΑ (COMPONENTS) ΠΟΥ ΕΧΩ ΔΗΜΙΟΥΡΓΗΣΕΙ
        AFRAME.registerComponent('testing', {
            init: function () {
                this.el.addEventListener('click', e => {
                    this.el.setAttribute('animation-mixer', { timeScale: 1 });
                });
            }
        });
    </script>
    <style>
        h1 { text-align: center; }
        h3 { text-align: center; }
        a-scene { width: 50%; height: 50%; border: dotted silver 1px; }
    </style>
</head>

<body>
    <h1>ΤΙΤΛΟΣ ΕΡΓΑΣΙΑΣ</h1>
    <h3>Ελένη Ανδρεαδάκη</h3>
    <hr />
    <P><strong>Σενάριο:</strong>...</P>
    <hr />
    <div align="center">
    <!-- ΕΔΩ ΠΕΡΙΓΡΑΦΩ ΤΗ ΣΚΗΝΗ -->
     <a-scene cursor="rayOrigin: mouse" background="color:cadetblue" ondblclick="this.requestFullscreen();" embedded>
    <a-assets>
    <a-asset-item id="pathModel" src="assets/trail_path.glb"></a-asset-item>
    <a-asset-item id="SpookyTree1" src="assets/dead_tree (1).glb"></a-asset-item>
    <a-asset-item id="SpookyTree2" src="assets/dead_tree.glb"></a-asset-item>
    <a-asset-item id="SpookyTree3" src="assets/old_tree (2).glb"></a-asset-item>
    <a-asset-item id="SpookyTree4" src="assets/old_tree.glb"></a-asset-item>
    <a-asset-item id="SpookyTrees" src="assets/dead_trees_demo.glb"></a-asset-item>

</a-assets>

    <a-plane src="assets/Ground024_8K-JPG_Color.jpg" normal-map="src: url(assets/Ground024_8K-JPG_NormalDX.jpg)" normal-maprepeat:="" 30="" 30;="" roughness-map="src: url(assets/Ground024_8K-JPG_Roughness.jpg)" roughness-maprepeat:="" displacement-map="src: url(assets/Ground024_8K-JPG_Displacement.jpg)" displacement-maprepeat:="" rotation="-90 0 0" width="40" height="40" repeat="30 30" material="roughness: 1; roughnessTextureOffset: 1 1" position="0 -0.66509 -2.86815">
</a-plane>
         
<a-entity id="FirstPath" gltf-model="assets/trail_path.glb" 
          position="-0.93865 -0.38783 -0.36974" 
          rotation="-8.85 -21.23 0"></a-entity>
        
<a-entity id="SpookyPath" gltf-model="assets/trail_path.glb" 
          position="-5.32429 0.16 -8.70607" 
          rotation="-1.75 48.42 0"
        scatter-trees="path: #SpookyPath; count: 30"></a-entity>

<a-entity id="GoodPath" gltf-model="assets/trail_path.glb" 
          position="3.20235 0.05 -8.73084" 
          rotation="-2.12 -70.23 0"></a-entity>
   
   </a-scene>
        

    </div>
    <script>
    // ΕΔΩ ΔΗΜΙΟΥΡΓΩ ΠΟΛΛΑΠΛΑ ΑΝΤΙΓΡΑΦΑ ΜΙΑΣ ΟΝΤΟΤΗΤΑΣ
        
AFRAME.registerComponent('scatter-trees', {
  schema: {
    path: { type: 'selector' },
    count: { type: 'int', default: 20 }, // total trees to spawn
    spread: { type: 'number', default: 5 } // max distance from path center
  },

  init: function () {
    const trees = [
      { id: '#SpookyTree1', scale: 0.3 },
      { id: '#SpookyTree2', scale: 0.4 },
      { id: '#SpookyTree3', scale: 0.6 },
      { id: '#SpookyTree4', scale: 0.7 },
      { id: '#SpookyTrees', scale: 0.6 }
    ];

    const sceneEl = this.el.sceneEl;
    const path = this.data.path;

    const pos = path.getAttribute('position');
    const rot = path.getAttribute('rotation');
    const yRad = THREE.Math.degToRad(rot.y);

    for (let i = 0; i < this.data.count; i++) {
      const treeChoice = trees[Math.floor(Math.random() * trees.length)];

      const tree = document.createElement('a-entity');
      tree.setAttribute('gltf-model', treeChoice.id);
      tree.setAttribute('scale', `${treeChoice.scale} ${treeChoice.scale} ${treeChoice.scale}`);

      // Randomly pick left or right side of path
      const sideOffset = (Math.random() > 0.5 ? 1 : -1) * (2 + Math.random() * this.data.spread);
      const forwardOffset = (Math.random() - 0.5) * 10; // spread along path
      const extraSpread = (Math.random() - 0.5) * 2; // extra randomness

      // Convert local offset to world coordinates
      const worldX = pos.x + Math.cos(yRad) * forwardOffset + Math.sin(yRad) * sideOffset + extraSpread;
      const worldZ = pos.z + Math.sin(yRad) * forwardOffset - Math.cos(yRad) * sideOffset + extraSpread;
      const worldY = pos.y;

      tree.setAttribute('position', { x: worldX, y: worldY, z: worldZ });

      sceneEl.appendChild(tree);
    }
  }
});
</script>

    <hr />
    <p><strong>Οδηγίες:<strong>...</p>
    <hr />
    <p><strong>Credits:</strong></p>
</body>

</html>





